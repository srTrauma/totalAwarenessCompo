(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[156],{6274:function(e,s,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Dashboard",function(){return a(5364)}])},5364:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return o}});var r=a(5893),l=a(7294),t=a(1163),n=a(9008),c=a.n(n),d=a(1029),i=a(1192);function o(){var e,s;let a=(0,t.useRouter)(),[n,o]=(0,l.useState)(null),[m,x]=(0,l.useState)(null),[h,u]=(0,l.useState)(!0),[g,j]=(0,l.useState)("");async function p(e){try{u(!0);let s=await fetch("/api/companies/detail?companyId=".concat(e),{headers:{userid:localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).id:""}});if(s.ok){let e=await s.json();x(e)}else{let e=await s.json();j(e.message||"Error al cargar detalles de la empresa"),a.push("/CompanySelection")}}catch(e){console.error("Error:",e),j("Error al conectar con el servidor"),a.push("/CompanySelection")}finally{u(!1)}}function b(){localStorage.removeItem("selectedCompany"),a.push("/CompanySelection")}return(0,l.useEffect)(()=>{let e=localStorage.getItem("user"),s=localStorage.getItem("selectedCompany");if(!e||!s){a.push("/Login");return}o(JSON.parse(e)),p(Number(s))},[a]),h?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Cargando... | Total Awareness"})}),(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})]}):g?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Error | Total Awareness"})}),(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"p-6 bg-red-50 rounded-lg border border-red-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-red-700 mb-2",children:"Error"}),(0,r.jsx)("p",{className:"text-red-600",children:g}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selecci\xf3n de empresa"})})]})})]}):m?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsxs)("title",{children:[m.name," | Dashboard | Total Awareness"]})}),(0,r.jsx)(d.Z,{}),(0,r.jsxs)("div",{className:"bg-gray-50 min-h-screen",children:[(0,r.jsx)("header",{className:"bg-white shadow",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,r.jsx)(i.m17,{className:"text-blue-600 text-xl"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:m.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:m.isOwner?"Propietario":"Rol: ".concat(null===(e=m.currentUserRole)||void 0===e?void 0:e.name)})]})]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)("button",{onClick:b,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 flex items-center",children:[(0,r.jsx)(i.m17,{className:"mr-2"}),"Cambiar empresa"]}),(0,r.jsxs)("button",{onClick:function(){localStorage.removeItem("user"),localStorage.removeItem("selectedCompany"),a.push("/Login")},className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50 flex items-center",children:[(0,r.jsx)(i.fHX,{className:"mr-2"}),"Cerrar sesi\xf3n"]})]})]})})}),(0,r.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Informaci\xf3n de la empresa"}),(0,r.jsxs)("dl",{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),(0,r.jsx)("dd",{className:"text-gray-900",children:m.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Descripci\xf3n"}),(0,r.jsx)("dd",{className:"text-gray-900",children:m.description||"Sin descripci\xf3n"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Propietario"}),(0,r.jsx)("dd",{className:"text-gray-900",children:m.owner.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Visibilidad"}),(0,r.jsx)("dd",{className:"text-gray-900",children:m.public?"P\xfablica":"Privada"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Miembros"}),(0,r.jsx)("dd",{className:"text-gray-900",children:m.memberCount})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Enlaces r\xe1pidos"}),(0,r.jsx)("div",{className:"space-y-3",children:(m.isOwner||m.currentUserRole&&m.currentUserRole.level<=2)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>a.push("/companies/manage/members"),className:"w-full flex items-center px-4 py-3 bg-blue-50 text-blue-800 rounded-md hover:bg-blue-100 transition-colors",children:[(0,r.jsx)(i.I$,{className:"mr-3"}),"Gestionar miembros"]}),(0,r.jsxs)("button",{onClick:()=>a.push("/companies/edit/".concat(m.id)),className:"w-full flex items-center px-4 py-3 bg-gray-50 text-gray-800 rounded-md hover:bg-gray-100 transition-colors",children:[(0,r.jsx)(i.p4t,{className:"mr-3"}),"Configuraci\xf3n de empresa"]})]})})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-6",children:[(0,r.jsx)("h2",{className:"text-lg font-medium mb-4",children:"Estado de tu cuenta"}),(0,r.jsxs)("div",{className:"flex items-center mb-3",children:[(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:(0,r.jsx)(i.Xws,{className:"text-green-600"})}),(0,r.jsxs)("div",{className:"ml-3",children:[(0,r.jsx)("p",{className:"font-medium",children:null==n?void 0:n.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null==n?void 0:n.email})]})]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Actualmente est\xe1s conectado a ",(0,r.jsx)("strong",{children:m.name})," con el rol de ",(0,r.jsx)("strong",{children:null===(s=m.currentUserRole)||void 0===s?void 0:s.name})]})]})]}),(0,r.jsxs)("div",{className:"bg-white shadow rounded-lg p-8",children:[(0,r.jsx)("h2",{className:"text-xl font-medium mb-6",children:"Panel de Control"}),(0,r.jsx)("p",{className:"text-gray-600",children:"\xa1Bienvenido al panel de control! Aqu\xed encontrar\xe1s todas las herramientas y recursos necesarios para gestionar tu empresa."}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(0,r.jsxs)("div",{className:"p-6 border rounded-lg bg-gray-50 hover:bg-gray-100 cursor-pointer transition-colors",children:[(0,r.jsx)("h3",{className:"font-medium mb-2",children:"Pr\xf3ximamente"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Estamos trabajando en nuevas funcionalidades para mejorar tu experiencia."})]})})})]})]})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{children:(0,r.jsx)("title",{children:"Empresa no encontrada | Total Awareness"})}),(0,r.jsx)(d.Z,{}),(0,r.jsx)("div",{className:"max-w-4xl mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"p-6 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-yellow-700 mb-2",children:"Empresa no encontrada"}),(0,r.jsx)("p",{className:"text-yellow-600",children:"No se encontr\xf3 la empresa seleccionada o no tienes acceso a ella."}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{onClick:b,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Volver a selecci\xf3n de empresa"})})]})})]})}a(4390)}},function(e){e.O(0,[365,717,912,833,888,774,179],function(){return e(e.s=6274)}),_N_E=e.O()}]);