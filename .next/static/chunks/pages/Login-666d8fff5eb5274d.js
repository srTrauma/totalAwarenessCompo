(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[667],{8445:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Login",function(){return r(7133)}])},7133:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var s=r(5893);r(4390);var n=r(7294),a=r(1163),i=r(1029),o=r(9008),l=r.n(o),c=r(1192);function u(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[u,d]=(0,n.useState)(""),[x,m]=(0,n.useState)(""),[f,g]=(0,n.useState)(""),[h,p]=(0,n.useState)(""),[b,v]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),S=(0,a.useRouter)(),[C,E]=(0,n.useState)(!0),k=()=>{if(g(""),!e.trim())return g("El nombre de usuario es obligatorio"),!1;if(!r.trim())return g("La contrase\xf1a es obligatoria"),!1;if(!C){if(r!==u)return g("Las contrase\xf1as no coinciden"),!1;if(!x.trim())return g("El email es obligatorio"),!1;if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x))return g("El formato del email no es v\xe1lido"),!1;if(r.length<6)return g("La contrase\xf1a debe tener al menos 6 caracteres"),!1}return!0};async function _(e){if(e.preventDefault(),k()){v(!0),g("");try{C?await P():await I()}catch(e){console.error("Error:",e),g("Ha ocurrido un error inesperado. Por favor, int\xe9ntalo de nuevo.")}finally{v(!1)}}}async function P(){try{let t=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})});if(t.ok){let e=await t.json();localStorage.setItem("user",JSON.stringify(e.user)),p("\xa1Inicio de sesi\xf3n exitoso!"),S.push("/CompanySelection")}else{let e=await t.json();g(e.message||"Error al iniciar sesi\xf3n")}}catch(e){console.error("Error al iniciar sesi\xf3n:",e),g("Error de conexi\xf3n. Por favor, int\xe9ntalo de nuevo.")}}async function I(){try{let s=await fetch("/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:x,password:r})});if(s.ok)await s.json(),p("\xa1Cuenta creada exitosamente! Ahora puedes iniciar sesi\xf3n."),E(!0),o(""),t("");else{let e=await s.json();g(e.message||"Error al registrar usuario")}}catch(e){console.error("Error al registrar:",e),g("Error de conexi\xf3n. Por favor, int\xe9ntalo de nuevo.")}}return(0,n.useEffect)(()=>{localStorage.getItem("user")&&S.push("/CompanySelection")},[S]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l(),{children:(0,s.jsxs)("title",{children:[C?"Iniciar sesi\xf3n":"Registrarse"," | Total Awareness"]})}),(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-sky-200 to-blue-300",children:[(0,s.jsx)(i.Z,{}),(0,s.jsx)("div",{className:"flex justify-center items-center min-h-[calc(100vh-80px)] px-4 py-12",children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden transition-all duration-300 transform hover:scale-[1.02]",children:(0,s.jsxs)("div",{className:"p-8",children:[(0,s.jsxs)("div",{className:"mb-8 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:C?"Iniciar sesi\xf3n":"Crear cuenta"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:C?"Accede a tu cuenta":"\xdanete a nosotros"})]}),f&&(0,s.jsx)("div",{className:"mb-6 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md",children:f}),h&&(0,s.jsx)("div",{className:"mb-6 p-3 bg-green-100 border border-green-400 text-green-700 rounded-md",children:h}),(0,s.jsxs)("form",{onSubmit:_,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500",children:(0,s.jsx)(c.Xws,{})}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Nombre de usuario",className:"pl-10 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",disabled:b})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500",children:(0,s.jsx)(c.kUi,{})}),(0,s.jsx)("input",{type:y?"text":"password",value:r,onChange:e=>o(e.target.value),placeholder:"Contrase\xf1a",className:"pl-10 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",disabled:b}),(0,s.jsx)("button",{type:"button",onClick:()=>j(!y),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:y?(0,s.jsx)(c.tgn,{}):(0,s.jsx)(c.dSq,{})})]}),!C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500",children:(0,s.jsx)(c.kUi,{})}),(0,s.jsx)("input",{type:N?"text":"password",value:u,onChange:e=>d(e.target.value),placeholder:"Confirmar contrase\xf1a",className:"pl-10 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",disabled:b}),(0,s.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-gray-700",children:N?(0,s.jsx)(c.tgn,{}):(0,s.jsx)(c.dSq,{})})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-500",children:(0,s.jsx)(c.SRX,{})}),(0,s.jsx)("input",{type:"email",value:x,onChange:e=>m(e.target.value),placeholder:"Correo electr\xf3nico",className:"pl-10 w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition",disabled:b})]})]}),(0,s.jsx)("button",{type:"submit",disabled:b,className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg transition duration-200 ease-in-out transform hover:scale-[1.01] focus:outline-none disabled:opacity-50",children:b?"Procesando...":C?"Iniciar sesi\xf3n":"Crear cuenta"})]}),(0,s.jsx)("div",{className:"mt-8 text-center",children:(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:[C?"\xbfNo tienes una cuenta?":"\xbfYa tienes una cuenta?",(0,s.jsx)("button",{onClick:function(){E(!C),g(""),p(""),o(""),d(""),C&&(t(""),m(""))},className:"ml-1 text-blue-600 hover:text-blue-800 font-semibold focus:outline-none",children:C?"Reg\xedstrate":"Inicia sesi\xf3n"})]})})]})})})]})]})}}},function(e){e.O(0,[365,717,912,833,888,774,179],function(){return e(e.s=8445)}),_N_E=e.O()}]);